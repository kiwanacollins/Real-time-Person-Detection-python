{% extends "base.html" %}

{% block title %}Logs - Person Detection System{% endblock %}
{% block nav_logs %}active{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Logs & Reports</h2>
    <div class="page-actions">
        <div class="date-filter">
            <label for="date-from">From:</label>
            <input type="date" id="date-from" class="form-control">
            <label for="date-to">To:</label>
            <input type="date" id="date-to" class="form-control">
            <button class="btn" id="date-filter-apply">Apply</button>
        </div>
        <div class="dropdown">
            <button class="btn btn-outline dropdown-toggle" id="export-btn">
                <svg viewBox="0 0 24 24">
                    <path d="M14,3V7H17.59L7.76,16.83L9.17,18.24L19,8.41V12H21V3M19,19H5V5H12V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                </svg>
                <span>Export</span>
            </button>
            <div class="dropdown-menu">
                <a href="#" id="export-csv">CSV</a>
                <a href="#" id="export-json">JSON</a>
                <a href="#" id="export-pdf">PDF</a>
            </div>
        </div>
    </div>
</div>

<div class="logs-container">
    <div class="search-container">
        <div class="search-input">
            <svg viewBox="0 0 24 24">
                <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" />
            </svg>
            <input type="text" id="log-search" class="form-control" placeholder="Search logs...">
        </div>
    </div>
    
    <div class="table-container">
        <table class="data-table" id="logs-table">
            <thead>
                <tr>
                    <th class="sortable" data-sort="timestamp">Timestamp <span class="sort-icon">â–¼</span></th>
                    <th class="sortable" data-sort="count">Count <span class="sort-icon"></span></th>
                    <th class="sortable" data-sort="confidence">Confidence <span class="sort-icon"></span></th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="logs-body">
                <tr class="loading-row">
                    <td colspan="4">Loading logs data...</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div class="pagination">
        <button class="btn btn-sm" id="prev-page" disabled>&lt;</button>
        <span id="pagination-info">Page 1 of 1</span>
        <button class="btn btn-sm" id="next-page" disabled>&gt;</button>
    </div>
</div>

<div class="log-detail-modal" id="log-detail-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Log Entry Detail</h3>
            <button class="modal-close" id="log-detail-close">&times;</button>
        </div>
        <div class="modal-body">
            <div class="log-detail-content">
                <div class="log-detail-row">
                    <span class="log-detail-label">Timestamp:</span>
                    <span class="log-detail-value" id="detail-timestamp"></span>
                </div>
                <div class="log-detail-row">
                    <span class="log-detail-label">Count:</span>
                    <span class="log-detail-value" id="detail-count"></span>
                </div>
                <div class="log-detail-row">
                    <span class="log-detail-label">Confidence:</span>
                    <span class="log-detail-value" id="detail-confidence"></span>
                </div>
                <div class="log-detail-row">
                    <span class="log-detail-label">System Status:</span>
                    <span class="log-detail-value" id="detail-status"></span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', path='/js/logs.js') }}"></script>
{% endblock %}
